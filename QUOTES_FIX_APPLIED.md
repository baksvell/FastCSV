# Исправление проблемы с файлами с кавычками

## Проблема

Medium with quotes (1000 rows): **3.08x медленнее** (1.71ms -> 5.28ms)

## Причина

Для файлов с кавычками проверка `has_unclosed_quotes` может возвращать True, что заставляет использовать построчное чтение вместо batch обработки. Это добавляет огромный overhead Python-C++ вызовов.

## Решение

**КРИТИЧЕСКАЯ ОПТИМИЗАЦИЯ**: Для маленьких/средних файлов (<500KB) пропускаем проверку `has_unclosed_quotes` и всегда используем batch обработку.

### Что изменено:

1. Для файлов <500KB с кавычками всегда используется batch обработка
2. Проверка `has_unclosed_quotes` выполняется только для больших файлов (>=500KB)
3. Это избегает построчного чтения для средних файлов с кавычками

### Ожидаемый эффект:

- Medium with quotes (1000 rows, ~159KB): должен стать быстрее
- Уменьшение overhead от построчного чтения
- Использование оптимизированной batch обработки

## Статус

✅ Изменения применены
⏳ Ожидается тестирование




