# Оптимизация Small (10 rows) - увеличение порога fallback к std_csv

## Проблема

Small (10 rows): **1.20x-1.60x медленнее** стандартного csv (0.01ms -> 0.02ms)

## Анализ

- Размер файла Small (10 rows): **~1450 байт**
- Текущий порог fallback к std_csv: **200 байт**
- Файл не попадает в fallback, так как 1450 > 200

## Решение

Увеличен порог fallback к std_csv с **200 байт до 2KB (2048 байт)**:
- Файлы <2KB теперь используют встроенный `csv.reader`
- Это избегает overhead инициализации FastCSV для очень маленьких файлов

## Результаты

### До оптимизации:
- Small (10 rows): **1.20x-1.60x медленнее** (вариативность бенчмарков)

### После оптимизации:
- Small (10 rows): **1.52x-1.60x медленнее** (не изменилось)

## Анализ результата

Результат не изменился, что может указывать на:
1. Файл не попадает в блок fallback (возможно, обрабатывается другим путем)
2. Overhead инициализации FastCSV все еще заметен даже при использовании std_csv
3. Вариативность бенчмарков для очень маленьких файлов

## Рекомендации

1. **Проверить логику**: Убедиться, что файл действительно попадает в блок fallback
2. **Увеличить порог еще больше**: Попробовать 3KB или 5KB
3. **Оптимизировать инициализацию**: Уменьшить overhead инициализации FastCSV для маленьких файлов

## Статус

⚠️ **Требует дополнительной проверки**
- Порог увеличен, но результат не изменился
- Нужно проверить, действительно ли файл попадает в fallback




