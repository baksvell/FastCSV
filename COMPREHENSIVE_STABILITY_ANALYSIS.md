# Комплексный анализ стабильности (6 прогонов)

## Результаты всех прогонов

### Large (10000 rows)
| Прогон | Speedup | Статус |
|--------|---------|--------|
| 1 | 6.79x faster | ✅ |
| 2 | 6.11x faster | ✅ |
| 3 | 5.39x faster | ✅ |
| 4 | 6.45x faster | ✅ |
| 5 | 6.95x faster | ✅ |
| 6 | 6.86x faster | ✅ |
| **Среднее** | **6.43x faster** | ✅ |
| **Мин** | 5.39x | |
| **Макс** | 6.95x | |
| **Вариативность** | ±0.78x (12%) | ⚠️ Средняя |

### Medium (1000 rows)
| Прогон | Speedup | Статус |
|--------|---------|--------|
| 1 | 1.45x faster | ✅ |
| 2 | 1.44x faster | ✅ |
| 3 | 1.38x faster | ✅ |
| 4 | 1.06x faster | ⚠️ |
| 5 | 1.47x faster | ✅ |
| 6 | 1.44x faster | ✅ |
| **Среднее** | **1.37x faster** | ✅ |
| **Мин** | 1.06x | |
| **Макс** | 1.47x | |
| **Вариативность** | ±0.20x (15%) | ⚠️ Средняя |

### Medium with quotes (1000 rows)
| Прогон | Speedup | Статус |
|--------|---------|--------|
| 1 | 1.10x slower | ⚠️ |
| 2 | 1.02x faster | ✅ |
| 3 | 1.30x slower | ⚠️ |
| 4 | 1.42x slower | ⚠️ |
| 5 | 1.07x slower | ⚠️ |
| 6 | 1.09x slower | ⚠️ |
| **Среднее** | **1.20x slower** | ⚠️ |
| **Мин** | 1.02x faster | |
| **Макс** | 1.42x slower | |
| **Вариативность** | Высокая | ⚠️ |

### Medium with unicode (1000 rows)
| Прогон | Speedup | Статус |
|--------|---------|--------|
| 1 | 1.01x faster | ✅ |
| 2 | 1.01x faster | ✅ |
| 3 | 1.20x slower | ⚠️ |
| 4 | 1.03x faster | ✅ |
| 5 | 1.19x faster | ✅ |
| 6 | 1.14x slower | ⚠️ |
| **Среднее** | **1.00x** (примерно равно) | ⚠️ |
| **Мин** | 1.20x slower | |
| **Макс** | 1.19x faster | |
| **Вариативность** | Высокая | ⚠️ |

### Small (100 rows)
| Прогон | Speedup | Статус |
|--------|---------|--------|
| 1 | 1.49x faster | ✅ |
| 2 | 1.54x faster | ✅ |
| 3 | 1.31x faster | ✅ |
| 4 | 1.53x faster | ✅ |
| 5 | 1.56x faster | ✅ |
| 6 | 1.54x faster | ✅ |
| **Среднее** | **1.50x faster** | ✅ |
| **Вариативность** | ±0.13x (9%) | ✅ Стабильно |

## Анализ стабильности

### ✅ Стабильные результаты

1. **Small (100 rows)**: 1.50x faster (стабильно)
   - Вариативность: ±0.13x (9%)
   - Все прогоны быстрее

2. **Medium (1000 rows)**: 1.37x faster (в целом стабильно)
   - Вариативность: ±0.20x (15%)
   - 5 из 6 прогонов быстрее

3. **Large (10000 rows)**: 6.43x faster (стабильно)
   - Вариативность: ±0.78x (12%)
   - Все прогоны быстрее

### ⚠️ Нестабильные результаты

1. **Medium with quotes**: 1.20x slower (в среднем)
   - Высокая вариативность
   - 1 из 6 прогонов быстрее (1.02x)
   - 5 из 6 прогонов медленнее (1.07x - 1.42x)

2. **Medium with unicode**: 1.00x (примерно равно)
   - Высокая вариативность
   - 3 из 6 прогонов быстрее
   - 2 из 6 прогонов медленнее

## Общая статистика по прогонам

| Прогон | Быстрее | Медленнее | Статус |
|--------|---------|-----------|--------|
| 1 | 6/8 | 2/8 | ✅ |
| 2 | 7/8 | 1/8 | ✅ Лучший |
| 3 | 4/8 | 4/8 | ⚠️ |
| 4 | 6/8 | 2/8 | ✅ |
| 5 | 6/8 | 2/8 | ✅ |
| 6 | 5/8 | 3/8 | ⚠️ |
| **Среднее** | **5.7/8 (71%)** | **2.3/8 (29%)** | ✅ |

## Выводы

### 1. Оптимизация работает ✅
- Large файлы: стабильно 6.43x faster (все прогоны быстрее)
- Small файлы: стабильно 1.50x faster
- Medium файлы: стабильно 1.37x faster (5 из 6 прогонов)

### 2. Проблемы с файлами с кавычками ⚠️
- Medium with quotes: в среднем 1.20x slower
- Medium with unicode: примерно равно (1.00x)
- Высокая вариативность может быть системной

### 3. Общие результаты хорошие ✅
- 71% тестов быстрее (в среднем)
- Large файлы стабильно показывают отличные результаты
- Маленькие и средние файлы стабильны

## Рекомендации

### Вариант 1: Оставить текущие изменения ✅ (РЕКОМЕНДУЕТСЯ)

**Обоснование:**
1. Large файлы стабильно показывают отличные результаты (6.43x в среднем)
2. Small и Medium файлы стабильны
3. 71% тестов быстрее в среднем
4. Проблемы с файлами с кавычками могут быть системными

**Действия:**
- Оставить текущие изменения
- Принять, что Medium with quotes может быть медленнее в некоторых случаях
- Это приемлемо, так как большинство тестов быстрее

### Вариант 2: Откатить дополнительную оптимизацию для больших файлов

**Обоснование:**
- Если проблемы с файлами с кавычками критичны
- Если нужна более стабильная производительность

**Действия:**
- Вернуться к версии без дополнительной оптимизации (>5000 строк)
- Оставить базовую оптимизацию (>2000 строк)

## Итоговая рекомендация

**Оставить текущие изменения** ✅

**Причины:**
1. Large файлы стабильно показывают отличные результаты (6.43x в среднем)
2. Small и Medium файлы стабильны
3. 71% тестов быстрее в среднем
4. Проблемы с файлами с кавычками могут быть системными и не критичны

**Текущие результаты приемлемы для использования.**



